<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Generatore di Prompt per Social Media</title>
    <link rel="icon" href="favicon.ico">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
        :root {
            --brand-blue: #0146bc;
            --brand-yellow: #eddc01;
            --light-gray: #f3f4f6;
            --text-dark: #1f2937;
            --text-medium: #4b5563;
        }
        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--light-gray);
            color: var(--text-dark);
        }
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            font-weight: 600;
            border-radius: 8px;
            padding: 12px 24px;
            transition: all 0.2s ease-in-out;
            border: 2px solid transparent;
        }
        .btn-primary {
            background-color: var(--brand-blue);
            color: white;
        }
        .btn-primary:hover {
            background-color: #013da7;
        }
        .btn-copy {
            background-color: #374151;
            color: white;
            padding: 6px 12px;
            font-size: 0.875rem;
        }
        .btn-copy:hover {
            background-color: #4b5563;
        }
        .input-field, .textarea-field {
            border: 1px solid #d1d5db;
            border-radius: 8px;
            padding: 10px 12px;
            width: 100%;
            transition: border-color 0.2s ease, box-shadow 0.2s ease;
            background-color: #fff;
        }
        .input-field:focus, .textarea-field:focus {
            outline: none;
            border-color: var(--brand-blue);
            box-shadow: 0 0 0 3px rgba(1, 70, 188, 0.2);
        }
        .prompt-output {
            background-color: #111827;
            color: #d1d5db;
            border-radius: 8px;
            padding: 20px;
            font-family: 'SF Mono', 'Courier New', Courier, monospace;
            white-space: pre-wrap;
            word-wrap: break-word;
            position: relative;
        }
        .fade-in {
            animation: fadeIn 0.5s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body class="p-4 sm:p-6 md:p-8">
    <div class="max-w-5xl mx-auto">
        
        <header class="text-center mb-10">
            <h1 class="text-3xl sm:text-4xl font-bold text-[--brand-blue]">Generatore di Prompt</h1>
            <p class="text-lg text-text-medium mt-2">Crea prompt strutturati per la generazione di contenuti social.</p>
            <hr class="w-24 h-1 mx-auto mt-4 border-0 rounded bg-[--brand-yellow]">
        </header>

        <main class="bg-white p-6 sm:p-8 rounded-xl shadow-lg space-y-8">
            <div id="news-container" class="space-y-6">
                <!-- News Sections will be dynamically created here -->
            </div>

            <div class="flex justify-center pt-4">
                <button id="generateBtn" class="btn btn-primary text-lg">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 16 16">
                        <path d="M11.251.068a.5.5 0 0 1 .227.58L9.677 6.5H13a.5.5 0 0 1 .364.843l-8 8.5a.5.5 0 0 1-.842-.49L6.323 9.5H3a.5.5 0 0 1-.364-.843l8-8.5a.5.5 0 0 1 .615-.032z"/>
                    </svg>
                    <span id="generateBtnText">Genera Prompt</span>
                </button>
            </div>
        </main>

        <section id="output-section" class="bg-white mt-8 rounded-xl shadow-lg p-6 sm:p-8 hidden">
            <h2 class="text-2xl font-bold text-text-dark mb-4">Prompt Generato</h2>
            <div class="prompt-output">
                <button id="copyBtn" class="absolute top-3 right-3 btn btn-copy">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                        <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/>
                        <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/>
                    </svg>
                    <span id="copyBtnText">Copia</span>
                </button>
                <code id="prompt-result"></code>
            </div>
        </section>

        <!-- Notification Element -->
        <div id="notification" class="fixed bottom-5 right-5 bg-red-500 text-white py-2 px-4 rounded-lg shadow-xl hidden transition-opacity duration-300">
            Inserisci almeno una notizia.
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const newsContainer = document.getElementById('news-container');
            for (let i = 1; i <= 3; i++) {
                const newsBlock = document.createElement('div');
                newsBlock.className = 'border border-gray-200 p-5 rounded-lg';
                newsBlock.innerHTML = `
                    <h3 class="text-xl font-semibold text-text-dark mb-4 flex items-center gap-2">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="text-gray-400" viewBox="0 0 16 16">
                            <path d="M0 2.5A1.5 1.5 0 0 1 1.5 1h11A1.5 1.5 0 0 1 14 2.5v10.528c0 .3-.05.654-.238.972h.738a.5.5 0 0 0 .5-.5v-9a.5.5 0 0 1 1 0v9a1.5 1.5 0 0 1-1.5 1.5H1.497A1.497 1.497 0 0 1 0 13.5v-11zM12 14c.37 0 .654-.211.853-.441.092-.106.147-.279.147-.531V2.5a.5.5 0 0 0-.5-.5h-11a.5.5 0 0 0-.5.5v11c0 .278.223.5.497.5H12z"/>
                            <path d="M2 3h10v2H2V3zm0 3h4v3H2V6zm0 4h4v1H2v-1zm0 2h4v1H2v-1zm5-6h2v1H7V6zm3 0h2v1h-2V6zM7 8h2v1H7V8zm3 0h2v1h-2V8zm-3 2h2v1H7v-1zm3 0h2v1h-2v-1zm-3 2h2v1H7v-1zm3 0h2v1h-2v-1z"/>
                        </svg>
                        News ${i}
                    </h3>
                    <div class="space-y-4">
                        <div>
                            <label for="newsText${i}" class="block text-sm font-medium text-text-medium mb-1">Testo della notizia</label>
                            <textarea id="newsText${i}" rows="6" class="textarea-field" placeholder="Incolla qui l'articolo, il comunicato stampa o una sintesi..."></textarea>
                        </div>
                        <div>
                            <label for="videoFile${i}" class="block text-sm font-medium text-text-medium mb-1">Riferimento file video (opzionale)</label>
                            <input type="text" id="videoFile${i}" class="input-field" placeholder="Es: video_inclusione.mp4">
                        </div>
                        <div>
                            <label for="specs${i}" class="block text-sm font-medium text-text-medium mb-1">Note aggiuntive (opzionale)</label>
                            <textarea id="specs${i}" rows="2" class="textarea-field" placeholder="Es: Enfatizzare il ruolo dei giovani..."></textarea>
                        </div>
                    </div>
                `;
                newsContainer.appendChild(newsBlock);
            }
        });

        const generateBtn = document.getElementById('generateBtn');
        const generateBtnText = document.getElementById('generateBtnText');
        const copyBtn = document.getElementById('copyBtn');
        const copyBtnText = document.getElementById('copyBtnText');
        const notification = document.getElementById('notification');

        function showNotification(message) {
            notification.textContent = message;
            notification.classList.remove('hidden');
            setTimeout(() => {
                notification.classList.add('hidden');
            }, 3000);
        }

        generateBtn.addEventListener('click', () => {
            let newsCount = 0;
            let newsContent = "";
            let columnHeaders = [];

            generateBtn.disabled = true;
            generateBtnText.textContent = 'Generazione...';

            for (let i = 1; i <= 3; i++) {
                const text = document.getElementById(`newsText${i}`).value.trim();
                const video = document.getElementById(`videoFile${i}`).value.trim();
                const specs = document.getElementById(`specs${i}`).value.trim();

                if (text) {
                    newsCount++;
                    columnHeaders.push(`"News ${newsCount}"`);
                    newsContent += `
---
**NEWS ${newsCount}**
**Testo:**
${text}
`;
                    if (video) {
                        newsContent += `\n**Riferimento video:**\n${video}\n`;
                    }
                    if (specs) {
                        newsContent += `\n**Specifiche aggiuntive:**\n${specs}\n`;
                    }
                     newsContent += `---`;
                }
            }

            setTimeout(() => {
                if (newsCount === 0) {
                    showNotification("Inserisci almeno una notizia per generare il prompt.");
                    generateBtn.disabled = false;
                    generateBtnText.textContent = 'Genera Prompt';
                    return;
                }

                const finalPrompt = `Sei un assistente per la creazione di contenuti social. Il tuo compito è generare dei testi per i canali social partendo dalle informazioni fornite.

**INFORMAZIONI SULLE NOTIZIE:**
${newsContent}

**DIRETTIVE DI STILE E TONO:**
* **Tono di voce:** Chiaro e istituzionale, senza enfasi e senza eccessi di emoticons, hashtag o punti esclamativi.
* **Stile:** Semplice ed informativo, senza enfasi.
* **Brand:** Parla a nome dell'azienda, ma nomina il brand "Poste" solo quando necessario.
* **Stile NON pubblicitario:** l'obiettivo è creare una news, non dare del tu al lettore.
* **Contesto:** Considera che il testo si associa a un video giornalistico del TG aziendale.
* **Citazioni:** Se sono presenti citazioni virgolettate di Giuseppe Lasco o Matteo Del Fante, inseriscile fedelmente alla fine del copy per Facebook e Linkedin, attribuendole con la carica (es. Matteo Del Fante, Amministratore Delegato).

**REQUISITI DI LUNGHEZZA PER OGNI NEWS:**
1.  **Testo per WhatsApp ->** lunghezza circa 90 caratteri.
2.  **Titolo per Youtube ->** lunghezza massima 49 caratteri (evitare il più possibile ripetizioni rispetto a WhatsApp).
3.  **Testo per Facebook e Linkedin ->** Sintetizza i testi lunghi ma riproducendo fedelmente il testo fornito e riducendo al massimo espressioni creative. La lunghezza non ha limitazioni particolari: meglio essere sintetici ma non telegrafici. Aggiungi qualche hashtag pertinente.

**FORMATO DI OUTPUT (MOLTO IMPORTANTE):**
L'output finale deve essere unicamente un blocco di testo in formato CSV, senza alcuna spiegazione o introduzione. Il CSV deve essere strutturato come segue:

* **Delimitatore:** Virgola (,).
* **Qualificatore di testo:** Doppie virgolette (") per tutti i campi di testo.
* **Struttura:**
    * La prima riga (intestazione di colonna) deve essere: ,${columnHeaders.join(',')}
    * Le righe successive devono avere i seguenti titoli nella prima colonna, seguiti dai contenuti generati per ciascuna news:
        * "Testo descrittivo news Canale WA"
        * "Titolo YouTube"
        * "Copy post e descrizione YT"
        * "Link YouTube"
        * "Link TG Poste"
* **Contenuto:**
    * Popola le celle con i testi generati secondo le direttive.
    * Le righe "Link YouTube" e "Link TG Poste" devono contenere campi vuoti (es. "").

**Esempio di output CSV per due notizie:**
,"News 1","News 2"
"Testo descrittivo news Canale WA","Testo generato per WA news 1","Testo generato per WA news 2"
"Titolo YouTube","Titolo generato per YT news 1","Testo generato per YT news 2"
"Copy post e descrizione YT","Testo generato per FB/LI news 1","Testo generato per FB/LI news 2"
"Link YouTube","",""
"Link TG Poste","",""

Genera solo il codice CSV.`;

                document.getElementById('prompt-result').textContent = finalPrompt;
                const outputSection = document.getElementById('output-section');
                outputSection.classList.remove('hidden');
                outputSection.classList.add('fade-in');
                
                outputSection.scrollIntoView({ behavior: 'smooth' });
                
                generateBtn.disabled = false;
                generateBtnText.textContent = 'Genera Prompt';

            }, 500); // simulate processing
        });

        copyBtn.addEventListener('click', () => {
            const promptText = document.getElementById('prompt-result').textContent;
            const textArea = document.createElement("textarea");
            textArea.value = promptText;
            textArea.style.position = "fixed";
            document.body.appendChild(textArea);
            textArea.focus();
            textArea.select();
            try {
                document.execCommand('copy');
                copyBtnText.textContent = 'Copiato!';
                copyBtn.classList.add('bg-green-600');
                setTimeout(() => {
                    copyBtnText.textContent = 'Copia';
                    copyBtn.classList.remove('bg-green-600');
                }, 2000);
            } catch (err) {
                console.error('Fallback: Impossibile copiare', err);
                showNotification('Errore durante la copia.');
            }
            document.body.removeChild(textArea);
        });
    </script>
</body>
</html>
